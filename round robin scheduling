GChart = []  # Gaint Chart


class process:
    def __init__(self, PId, AT, BT):
        self.PId = PId  # process id
        self.arrival = AT  # arrival time
        self.burst = BT  # burst time


def shiftCL(alist):  # circular shift left fn: to rearrange queue
    temp = alist[0]
    for i in range(len(alist)-1):
        alist[i] = alist[i+1]
    alist[len(alist)-1] = temp
    return alist


def RR(TQ, PList, n):  # time quantum, processes list, number of processes
    global GChart
    queue = []  # waiting queue
    time = 0  # current time
    AP = 0  # arrived processes
    RP = 0  # ready processes
    DP = 0  # done processes
    q = TQ  # time quantum
    start = 0
    while(DP < n):
        for i in range (AP, n):
            if (time>= PList[i].arrival):
                queue.append(PList[i])
                AP+=1
                RP+=1
# if no process come or alla processes finished
        if (RP < 1):
            GChart.append(0)
            time += 1
            continue
        # shift
        if (start):  # if first quantum time is done
            queue = shiftCL(queue)

        if (queue[0].burst > 0):
            if (queue[0].burst > q):
                for g in range(time, time+q):
                    GChart.append(queue[0].PId)
                time += q
                queue[0].burst -= q
            else:  # if process burst <= quantum
                for g in range(time, time+queue[0].burst):
                    GChart.append(queue[0].PId)
                time += queue[0].burst
                queue[0].burst = 0
                DP += 1
                RP -= 1
            start = 1


# test
def main():
    plist = []
    plist.append(process(1, 0, 5))
    plist.append(process(2, 1, 3))
    plist.append(process(3, 3, 6))
    plist.append(process(4, 5, 1))
    plist.append(process(5, 6, 4))
    RR(3, plist, len(plist))
    print(GChart)


if __name__ == '__main__': main()





